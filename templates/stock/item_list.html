{% extends 'base.html' %}

{% load stock_extras %}

{% block content %}
<div class="search-bar">
    <form method="get" action="" style="display:flex; width:100%; gap:0.5rem;">
        <input type="text" name="q" placeholder="{{ 'Search placeholder'|translate:request.LANGUAGE_CODE }}"
            value="{{ request.GET.q }}">
        <button type="submit" class="btn">{{ 'Search'|translate:request.LANGUAGE_CODE }}</button>
    </form>
</div>

{% for item in items %}
<div class="card">
    <div style="display:flex; justify-content:space-between; align-items:flex-start;">
        <div>
            <h3><a href="{% url 'item_detail' item.code %}">{{ item.name }}</a></h3>
            <small>{{ item.code }} | {{ item.category.name }}</small>
        </div>
        <span class="status-badge status-{{ item.status }}">{{ item.get_status_display }}</span>
    </div>
    <p>{{ 'Quantity'|translate:request.LANGUAGE_CODE }}: {{ item.quantity }}</p>
    {% if item.qr_code %}
    <div style="text-align:center; margin-top:0.5rem;">
        <img src="{{ item.qr_code.url }}" width="80" height="80">
        <br>
        <a href="{% url 'item_detail' item.code %}" class="btn" style="padding:0.25rem 0.5rem; font-size:0.8rem;">
            {{ 'View'|translate:request.LANGUAGE_CODE }}
        </a>
    </div>
    {% endif %}
</div>
{% empty %}
<p>{{ 'No items found'|translate:request.LANGUAGE_CODE }}</p>
{% endfor %}
{% endblock %}